var j=(t,m,s)=>new Promise((n,u)=>{var i=a=>{try{o(s.next(a))}catch(r){u(r)}},d=a=>{try{o(s.throw(a))}catch(r){u(r)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,d);o((s=s.apply(t,m)).next())});import{f as S,u as E,a as C,r as c,j as e}from"./index-kZWgRziL.js";const q=()=>{var p,f;const{currentUser:t,login:m,isLoading:s}=S(),n=E(),i=((f=(p=C().state)==null?void 0:p.from)==null?void 0:f.pathname)||"/dashboard",[d,o]=c.useState(""),[a,r]=c.useState(""),[h,w]=c.useState(!1),y=l=>o(l.target.value),N=l=>r(l.target.value),v=()=>w(!h),[x,b]=c.useState(""),L=l=>j(void 0,null,function*(){l.preventDefault(),b("");try{yield m({username:d.trim(),password:a}),r(""),n(i,{replace:!0})}catch(g){b((g==null?void 0:g.message)||"Login Failed")}});return c.useEffect(()=>{!s&&t&&(n(i),console.log("currentUser",t))},[t,s,n]),s?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})}):t?e.jsx("div",{children:e.jsxs("h1",{children:["Welcome ",t.name]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("form",{onSubmit:L,className:"bg-white p-10 rounded shadow-md border border-gray-200 w-96",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Login"}),x&&e.jsx("p",{className:"text-red-500 mb-4",children:x}),e.jsx("div",{className:"mb-4",children:e.jsx("label",{className:"block text-gray-700",children:e.jsx("input",{type:"email",value:d,onChange:y,placeholder:"jane@example.com",className:"w-full px-3 py-2 border rounded",required:!0})})}),e.jsx("div",{className:"mb-4 relative",children:e.jsxs("label",{className:"block text-gray-700",children:[e.jsx("input",{type:h?"text":"password",value:a,onChange:N,placeholder:"••••••••",className:"w-full px-3 py-2 border rounded",required:!0}),e.jsx("button",{type:"button",onClick:v,className:"absolute right-2 top-2 text-gray-600",children:h?"Hide":"Show"})]})}),e.jsx("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800",disabled:s,children:s?"Logging in...":"Login"})]})})};export{q as default};
